<!-- Overriding default Bootstrap color -->
<style>
  :root {
    /* Setting primary color to a custom green */
    --bs-primary: #32CD32;
  }

  .card:hover {
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);
    transition: box-shadow 0.2s ease-in-out;
  }

  footer .text-muted {
    color: #555 !important;
  }

  /* Hero section background image and styling */
  .hero-section {
    /* Uses a soft green gradient background instead of a plain color */
    background: linear-gradient(135deg, #32cd32 0%, #228b22 100%);
    color: #fff;
    /* ensures good contrast on the gradient */
    padding: 4rem 2rem;
    border-radius: 8px;
    text-align: center;
    position: relative;
    /* allows for potential decorative elements or positioning */
  }

  .hero-section .btn-hero {
    margin-top: 1rem;
    font-size: 1.2rem;
  }

  /* asubtle scale on hover for the stats cards */
  .stats-card:hover {
    transform: scale(1.02);
    transition: transform 0.2s ease;
  }

  .navbar-dark.bg-lime {
    background-color: #32cd32 !important;
  }

  .hero-logo-frame {
    display: inline-block;
    border-radius: 50%;
    padding: 1.5rem;
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);
    margin-bottom: 1.5rem;
    /* spacing under the logo */
  }

  .hero-logo-frame img {
    max-width: 150px;
  }

  .hero-section .btn-hero {
    margin-top: 1rem;
    font-size: 1.2rem;
    transition: transform 0.2s, background-color 0.2s;
  }

  .hero-section .btn-hero:hover {
    transform: translateY(-2px);
    background-color: #e6e6e6;
    /* a subtle color change on hover */
  }
</style>

<!-- Start of Green Count Home Component -->

<nav class="navbar navbar-dark bg-lime">
  <div class="container-fluid">
    <a class="navbar-brand" href="/home">Green Count</a>
    <button class="navbar-toggler" type="button" (click)="toggleMenu()" aria-controls="offcanvasNav"
      aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasNav"
      aria-labelledby="offcanvasNavLabel">

      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasNavLabel">Green Count Menu</h5>
        <button type="button" class="btn-close btn-close-white" (click)="toggleMenu()" aria-label="Close"></button>

      </div>
      <div class="offcanvas-body">
        <ul class="navbar-nav flex-column">
          <li class="nav-item mb-2">
            <a class="nav-link text-white" href="/home">Home</a>
          </li>
          <li class="nav-item mb-2">
            <a class="nav-link text-white" href="daily-emissions">Daily Emissions</a>
          </li>
          <li class="nav-item mb-2">
            <a class="nav-link text-white" href="chat">AI Chatbot</a>
          </li>
          <li class="nav-item mb-2">
            <a class="nav-link text-white" href="/settings">Settings</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>

<!-- Hero Section -->
<div class="container mt-4">
  <div class="hero-section mb-4">
    <div class="hero-logo-frame" style="background-color: rgba(255, 255, 255, 0.2);">
      <img src="sample-logo.jpg" alt="GreenCount Logo" class="img-fluid" style="max-width: 150px;" />
    </div>

    <h1 class="display-4 fw-bold">Welcome to Green Count</h1>


    <p class="fs-5">
      Monitor your carbon footprint and take actionable steps to reduce it.
    </p>
    <button class="btn btn-light btn-hero" (click)="goToDailyEmissions()">
      Calculate Your Daily Emissions
    </button>
  </div>
</div>

<div class="container">
  <h1 class="mb-4 text-center">Green Count Dashboard</h1>
  <p class="text-center">{{ message }}</p>

  <!-- Example Row of Stats Cards (Recommended Emissions) -->
  <div class="row mb-4">
    <div class="col-md-4">
      <div class="card text-center stats-card">
        <div class="card-body">
          <h5 class="card-title">Recommended Daily</h5>
          <p class="card-text fs-4">{{ recommendedDailyEmissions }} kg COâ‚‚</p>
          <p class="text-muted">Guideline for net-zero goals</p>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card text-center stats-card">
        <div class="card-body">
          <h5 class="card-title">Recommended Monthly</h5>
          <p class="card-text fs-4">{{ recommendedMonthlyEmissions }} kg COâ‚‚</p>
          <p class="text-muted">(~{{ recommendedDailyEmissions }} kg/day)</p>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card text-center stats-card">
        <div class="card-body">
          <h5 class="card-title">Annual Emissions Target</h5>
          <p class="card-text fs-4">{{ recommendedYearlyEmissions | number:'1.0-0' }} kg COâ‚‚</p>
          <p class="text-muted">Approx. based on UK net-zero targets</p>
        </div>
      </div>
    </div>
  </div>

  <app-tip-of-the-day></app-tip-of-the-day>




  <!-- Loading Indicator -->
  <div *ngIf="isLoading" style="color: blue;">Loading...</div>



  <div class="card mb-4">
    <!-- <div class="card-header">
      <h3>Energy Impact Result</h3>
    </div>
    <div class="card-body" *ngIf="energyEmissions !== null">
      <p><strong>CO2 Emissions:</strong> {{ energyEmissions }} tons of CO2</p>
    </div> -->
  </div>

  <div class="card mb-4">
    <div class="card-header">
      <h3>Calculate Food Impact</h3>
    </div>
    <div class="card-body">
      <div class="row g-3 align-items-center">
        <div class="col-md-6">
          <label class="form-label">Food Item:</label>
          <select class="form-select" [(ngModel)]="foodItem">
            <option value="beef">Beef</option>
            <option value="chicken">Chicken</option>
            <option value="pork">Pork</option>
            <option value="vegetables">Vegetables</option>
            <option value="dairy">Dairy</option>
          </select>
        </div>
        <div class="col-md-6">
          <label class="form-label">Weight (kg):</label>
          <input type="number" class="form-control" [(ngModel)]="foodWeight" placeholder="Enter weight in kg" />
        </div>
      </div>
      <button class="btn btn-success mt-3" (click)="convertFoodImpact()">Calculate Food Impact</button>
    </div>
  </div>

  <div class="alert alert-secondary" role="alert">
    <strong>Note:</strong> The food emissions data is based on average COâ‚‚ emissions per kilogram for different food types.
    Iâ€™m using typical industry values and environmental research studies that show the relative emissions impact of foods like beef, chicken, pork, vegetables, and dairy.
    The values are hardcoded in the backend for simplicity, but they are based on real-world average estimates from trusted environmental sources.
  </div>
  

  <div *ngIf="foodEmissions !== null" class="alert alert-info">
    <h3>Food Impact Result</h3>
    <p><strong>Food Item:</strong> {{ foodItem }}</p>
    <p><strong>Weight:</strong> {{ foodWeight }} kg</p>
    <p><strong>CO2 Emissions:</strong> {{ foodEmissions }} kg</p>
  </div>



  <button class="btn btn-info mt-3" (click)="goToChat()">Go to AI Chatbot for Emissions related advice</button>
  <br><br>
  <button class="btn btn-warning" (click)="goToDailyEmissions()">Calculate Daily Emissions</button><br>
  <button class="btn btn-primary mt-3" (click)="goToWeeklyEmissions()">Calculate Weekly Emissions</button><br>
  <button class="btn btn-info mt-3" (click)="loadUserEmissions()">Load My Emissions</button>




  <div class="card mt-4">
    <div class="card-header">
      <h3>Add Emission</h3>
    </div>
    <div class="card-body">
      <div class="row g-3 mb-3">
        <div class="col-md-4">
          <label class="form-label">Category:</label>
          <select class="form-select" [(ngModel)]="newEmission.category" (ngModelChange)="onCategoryChange()">
            <option value="Car">Car</option>
            <option value="Transport">Transport</option>
            <option value="Energy">Energy</option>
            <option value="Working">Working</option>
            <option value="Accommodation">Accommodation</option>
          </select>

        </div>
        <div class="col-md-4">
          <label class="form-label">Type:</label>
          <select class="form-select" [(ngModel)]="newEmission.type">
            <!-- Car options -->
            @if (newEmission.category === 'Car') {
            <option value="Diesel" selected>Diesel</option>
            <option value="Petrol">Petrol</option>
            <option value="Hybrid">Hybrid</option>
            }
            <!-- Transport options -->
            @if (newEmission.category === 'Transport') {
            <option value="Taxi" selected>Taxi</option>
            <option value="Bus">Bus</option>
            <option value="Rail">Rail</option>
            <option value="Flight">Flight</option>
            }
            <!-- Energy options -->
            @if (newEmission.category === 'Energy') {
            <option value="Electricity" selected>Electricity</option>
            }
            <!-- Working options -->
            @if (newEmission.category === 'Working') {
            <option value="Office" selected>Office</option>
            <option value="Home">Home</option>
            }
            <!-- Accommodation options -->
            @if (newEmission.category === 'Accommodation') {
            <option value="Hotel-UK" selected>Hotel-UK</option>
            <option value="Hotel-London">Hotel-London</option>
            }
          </select>

        </div>
        <div class="col-md-4">
          <label class="form-label">Value:</label>
          <input type="number" class="form-control" [(ngModel)]="newEmission.value" placeholder="Enter Value" />
          <small class="form-text text-muted">{{ valueHint }}</small>  <!-- ðŸ”¥ Add this line below the input -->
        </div>
        
      </div>
      <button class="btn btn-primary" (click)="addEmission()">Add Emission</button>
    </div>
  </div>
  <br><br>
  <app-emission-chart></app-emission-chart>

  <div class="alert alert-warning mt-3" role="alert">
    <strong>Note:</strong> The emission chart above is generated from your saved entries. It visualizes your personal activities and their associated carbon footprint, using trusted emission factors based on the type of data you provided.
  </div>
  
  @if (userEmissions.length > 0) {
  <table class="table table-striped table-bordered mt-3">
    <thead>
      <tr>
        <th>Category</th>
        <th>Type</th>
        <th>Value</th>
        <th>Unit</th>
        <th>Emissions</th>
      </tr>
    </thead>
    <tbody>
      @for (emission of userEmissions; track emission) {
      <tr>
        <td>{{ emission.category }}</td>
        <td>{{ emission.type }}</td>
        <td>{{ emission.value }}</td>
        <td>{{ emission.unit }}</td>
        <td>{{ emission.emissions }} kg CO2</td>
      </tr>
      }
    </tbody>
  </table>
  } @else {
  <p>No emissions data found.</p>
  }

  <button class="btn btn-danger mt-3" (click)="logout()">Sign Out</button>

</div>

<footer class="bg-light text-center text-muted py-3 mt-5">
  <div class="container">
    <small>Â© 2025 Green Count. All Rights Reserved.</small>
  </div>
</footer>
<!-- End of Green Count Home Component -->