<div class="container mt-4">

  <!-- Page Title -->
  <h2 class="text-center mb-4">Emission Chat Assistant</h2>

  <!-- Chat Box -->
  <div class="card shadow-sm" style="max-width: 800px; margin: 0 auto;">
    <div class="card-body d-flex flex-column" style="height: 400px;">
      
      <!-- Scrollable area for messages -->
      <div class="flex-grow-1 overflow-auto mb-3" style="scroll-behavior: smooth;">
        <div *ngFor="let msg of messages; trackBy: trackByFn" [ngClass]="{
          'text-start': msg.sender === 'user',
          'text-end': msg.sender !== 'user'
        }">
          <!-- Example styling: user-message vs ai-message -->
          <div class="p-2 my-1 rounded-3"
               [ngClass]="msg.sender === 'user' ? 'bg-light border user-message' : 'bg-success text-white ai-message'">
            <strong>{{ msg.sender === 'user' ? 'You' : 'AI' }}:</strong> {{ msg.text }}
          </div>
        </div>
      </div>

      <!-- Chat Input + Send Button -->
      <div class="d-flex">
        <input
          type="text"
          class="form-control me-2"
          [(ngModel)]="userMessage"
          placeholder="Ask about your emissions..."
          (keyup.enter)="sendMessage()"
        />
        <button class="btn btn-primary" (click)="sendMessage()">Send</button>
      </div>

    </div>
  </div>

  <!-- Back to Home Button -->
  <div class="text-center mt-4">
    <button class="btn btn-secondary" (click)="goHome()">Back to Home</button>
  </div>

</div>
